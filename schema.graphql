schema {
  query: Query
  mutation: Mutation
  subscription: Subscription
}

union LocationResult = District | Region | Street | Ward

union UserProfile = Admin | Agent | Landlord | Tenant

type Address @aws_api_key @aws_cognito_user_pools {
  coordinates: Coordinates
  district: String!
  postalCode: String
  region: String!
  street: String
  ward: String
}

type Admin @aws_api_key @aws_cognito_user_pools {
  accountStatus: AccountStatus
  createdAt: AWSDateTime
  currency: String
  email: String!
  emailNotifications: Boolean
  firstName: String!
  isEmailVerified: Boolean
  language: String
  lastName: String!
  permissions: [String!]
  phoneNumber: String
  profileImage: String
  pushNotifications: Boolean
  smsNotifications: Boolean
  updatedAt: AWSDateTime
  userType: UserType!
}

type Agent @aws_api_key @aws_cognito_user_pools {
  accountStatus: AccountStatus
  agencyName: String
  createdAt: AWSDateTime
  currency: String
  email: String!
  emailNotifications: Boolean
  firstName: String!
  isEmailVerified: Boolean
  language: String
  lastName: String!
  licenseNumber: String
  phoneNumber: String
  profileImage: String
  pushNotifications: Boolean
  smsNotifications: Boolean
  specializations: [String!]
  updatedAt: AWSDateTime
  userType: UserType!
}

type ApplicantDetails @aws_api_key @aws_cognito_user_pools {
  emergencyContact: EmergencyContact!
  hasPets: Boolean!
  leaseDuration: Int!
  monthlyIncome: Float!
  moveInDate: AWSDateTime!
  numberOfOccupants: Int!
  occupation: String!
  petDetails: String
  smokingStatus: SmokingStatus!
}

type Application @aws_api_key @aws_cognito_user_pools {
  applicant: TenantBasicInfo
  applicantDetails: ApplicantDetails!
  applicationId: ID!
  createdAt: AWSDateTime!
  landlord: LandlordBasicInfo
  landlordNotes: String
  property: Property
  propertyId: ID!
  rejectionReason: String
  status: ApplicationStatus!
  submittedAt: AWSDateTime!
  updatedAt: AWSDateTime!
}

type ApplicationListResponse @aws_api_key @aws_cognito_user_pools {
  applications: [Application!]!
  count: Int!
  nextToken: String
}

type ApplicationResponse @aws_api_key @aws_cognito_user_pools {
  applicationId: ID
  message: String!
  status: String
  submittedAt: String
  success: Boolean!
}

type ApplicationStats @aws_api_key @aws_cognito_user_pools {
  approved: Int!
  rejected: Int!
  submitted: Int!
  total: Int!
  underReview: Int!
  withdrawn: Int!
}

type AuthResponse @aws_api_key @aws_cognito_user_pools {
  accessToken: String!
  refreshToken: String!
  user: UserProfile!
}

type CategorizedPropertiesResponse @aws_api_key @aws_cognito_user_pools {
  favorites: CategoryPropertyResponse
  lowestPrice: CategoryPropertyResponse!
  more: CategoryPropertyResponse
  mostViewed: CategoryPropertyResponse
  nearby: CategoryPropertyResponse!
  recentlyViewed: CategoryPropertyResponse
}

type CategoryPropertyResponse @aws_api_key @aws_cognito_user_pools {
  category: PropertyCategory!
  count: Int!
  nextToken: String
  properties: [PropertyCard!]!
}

type ChatInitializationResponse @aws_api_key @aws_cognito_user_pools {
  conversationId: ID!
  landlordInfo: ChatLandlordInfo!
  propertyId: ID!
  propertyTitle: String!
}

type ChatLandlordInfo @aws_api_key @aws_cognito_user_pools {
  businessName: String
  firstName: String!
  lastName: String!
  profileImage: String
}

type ChatMessage @aws_api_key @aws_cognito_user_pools {
  content: String!
  conversationId: String!
  id: ID!
  isMine: Boolean!
  isRead: Boolean!
  senderName: String!
  timestamp: AWSDateTime!
}

type Conversation @aws_api_key @aws_cognito_user_pools {
  createdAt: AWSDateTime!
  id: String!
  lastMessage: String!
  lastMessageTime: AWSDateTime!
  otherPartyImage: String
  otherPartyName: String!
  propertyTitle: String!
  unreadCount: Int!
  updatedAt: AWSDateTime!
}

type Coordinates @aws_api_key @aws_cognito_user_pools {
  latitude: Float!
  longitude: Float!
}

type CreatePropertyResponse @aws_api_key @aws_cognito_user_pools {
  message: String!
  propertyId: ID!
  success: Boolean!
}

type District @aws_api_key @aws_cognito_user_pools {
  id: ID!
  name: String!
  regionId: ID!
}

type EmergencyContact @aws_api_key @aws_cognito_user_pools {
  email: String
  name: String!
  phoneNumber: String!
  relationship: String!
}

type FavoriteResponse @aws_api_key @aws_cognito_user_pools {
  isFavorited: Boolean!
  message: String
  success: Boolean!
}

type InitialAppState @aws_api_key @aws_cognito_user_pools {
  categorizedProperties: CategorizedPropertiesResponse!
  regions: [Region!]!
}

type Landlord @aws_api_key @aws_cognito_user_pools {
  accountStatus: AccountStatus
  businessLicense: String
  businessName: String
  createdAt: AWSDateTime
  currency: String
  email: String!
  emailNotifications: Boolean
  firstName: String!
  isEmailVerified: Boolean
  language: String
  lastName: String!
  phoneNumber: String
  profileImage: String
  pushNotifications: Boolean
  smsNotifications: Boolean
  taxId: String
  updatedAt: AWSDateTime
  userType: UserType!
  verificationDocuments: [String!]
}

type LandlordBasicInfo @aws_api_key @aws_cognito_user_pools {
  businessName: String
  firstName: String!
  lastName: String!
  profileImage: String
}

type LocationCreateResponse @aws_api_key @aws_cognito_user_pools {
  location: LocationResult!
  message: String!
  success: Boolean!
}

type LocationImportResponse @aws_api_key @aws_cognito_user_pools {
  errors: [String!]
  imported: Int!
  message: String!
  skipped: Int!
  success: Boolean!
}

type LocationJsonResponse @aws_api_key @aws_cognito_user_pools {
  cloudfrontUrl: String!
  message: String!
  success: Boolean!
}

type LocationUpdateResponse @aws_api_key @aws_cognito_user_pools {
  location: Region
  message: String
  success: Boolean!
}

type MediaFile @aws_api_key @aws_cognito_user_pools {
  contentType: String!
  fileName: String
  fileUrl: String!
}

type MediaItem @aws_api_key @aws_cognito_user_pools {
  actionTime: Float!
  additionalFiles: [MediaFile]
  media: PropertyMedia
  userId: String!
}

type MediaUploadResponse @aws_api_key @aws_cognito_user_pools {
  fileUrl: String!
  key: String!
  uploadUrl: String!
}

type Mutation {
  assignPropertyAgent(agentId: ID!, propertyId: ID!): SuccessResponse! @aws_cognito_user_pools
  associateMediaWithProperty(media: PropertyMediaInput!, propertyId: ID!): Property! @aws_cognito_user_pools
  createLocation(input: CreateLocationInput!): LocationCreateResponse! @aws_cognito_user_pools
  createProperty(input: CreatePropertyInput!): CreatePropertyResponse! @aws_cognito_user_pools
  deleteMediaItem(fileUrl: String!): MediaItem @aws_cognito_user_pools
  deleteProperty(propertyId: ID!): SuccessResponse! @aws_cognito_user_pools
  dummyMutation: String @aws_api_key @aws_cognito_user_pools
  forgotPassword(email: String!): SuccessResponse! @aws_api_key @aws_cognito_user_pools
  getMediaUploadUrl(contentType: String!, fileName: String!): MediaUploadResponse! @aws_cognito_user_pools
  importLocationsFromCSV(csvData: String!): LocationImportResponse! @aws_cognito_user_pools
  importPropertiesFromCSV(csvData: String!): PropertyImportResult! @aws_cognito_user_pools
  initializePropertyChat(propertyId: ID!): ChatInitializationResponse! @aws_cognito_user_pools
  markAsRead(conversationId: String!): Conversation! @aws_cognito_user_pools
  markPropertyAsAvailable(propertyId: ID!): Property! @aws_cognito_user_pools
  markPropertyAsRented(propertyId: ID!, tenantId: ID!): Property! @aws_cognito_user_pools
  publishNewPropertyEvent(propertyId: ID!, region: String!): SubscriptionPublishResponse @aws_cognito_user_pools
  publishPropertyUpdateEvent(input: PropertyUpdateEventInput!): PropertyUpdateEvent @aws_cognito_user_pools
  regenerateLocationJson: LocationJsonResponse! @aws_cognito_user_pools
  removePropertyAgent(propertyId: ID!): SuccessResponse! @aws_cognito_user_pools
  resendVerificationCode(email: String!): SuccessResponse! @aws_api_key @aws_cognito_user_pools
  resetPassword(confirmationCode: String!, email: String!, newPassword: String!): SuccessResponse! @aws_api_key @aws_cognito_user_pools
  sendMessage(input: SendMessageInput!): ChatMessage! @aws_cognito_user_pools
  signIn(email: String!, password: String!): AuthResponse! @aws_api_key @aws_cognito_user_pools
  signUp(input: SignUpInput!): AuthResponse! @aws_api_key @aws_cognito_user_pools
  submitApplication(input: SubmitApplicationInput!): Application! @aws_cognito_user_pools
  submitLandlordApplication(input: LandlordApplicationInput!): ApplicationResponse! @aws_cognito_user_pools
  toggleFavorite(propertyId: ID!): FavoriteResponse! @aws_cognito_user_pools
  updateApplication(applicationId: ID!, input: UpdateApplicationInput!): Application! @aws_cognito_user_pools
  updateApplicationStatus(applicationId: ID!, input: UpdateApplicationStatusInput!): Application! @aws_cognito_user_pools
  updateLocation(locationId: ID!, name: String!): LocationUpdateResponse! @aws_cognito_user_pools
  updateProperty(input: UpdatePropertyInput!, propertyId: ID!): SuccessResponse! @aws_cognito_user_pools
  updatePropertyStatus(propertyId: ID!, status: PropertyStatus!): Property! @aws_cognito_user_pools
  updateUser(input: UpdateUserInput!): UserProfile! @aws_cognito_user_pools
  verifyEmail(code: String!, email: String!): SuccessResponse! @aws_api_key @aws_cognito_user_pools
}

type Property @aws_api_key @aws_cognito_user_pools {
  address: Address!
  agent: PropertyUser
  agentId: ID
  amenities: [String!]
  availability: PropertyAvailability!
  createdAt: AWSDateTime!
  description: String!
  landlord: PropertyUser
  media: PropertyMedia
  pricing: PropertyPricing!
  propertyId: ID!
  propertyType: PropertyType!
  specifications: PropertySpecifications!
  status: PropertyStatus!
  title: String!
  updatedAt: AWSDateTime!
  version: Int
}

type PropertyAvailability @aws_api_key @aws_cognito_user_pools {
  available: Boolean!
  availableFrom: AWSDateTime
  maximumLeaseTerm: Int
  minimumLeaseTerm: Int
}

type PropertyCard @aws_api_key @aws_cognito_user_pools {
  bedrooms: Int
  currency: String!
  district: String!
  monthlyRent: Float!
  propertyId: ID!
  propertyType: PropertyType!
  region: String!
  thumbnail: String
  title: String!
}

type PropertyCardsResponse @aws_api_key @aws_cognito_user_pools {
  count: Int!
  nextToken: String
  properties: [PropertyCard!]!
}

type PropertyChange @aws_api_key @aws_cognito_user_pools {
  field: String!
  newValue: String!
  oldValue: String
}

type PropertyImportResult @aws_api_key @aws_cognito_user_pools {
  errors: [String!]!
  imported: Int!
  message: String!
  skipped: Int!
  success: Boolean!
  updated: Int!
}

type PropertyListResponse @aws_api_key @aws_cognito_user_pools {
  count: Int!
  nextToken: String
  properties: [Property!]!
}

type PropertyMedia @aws_api_key @aws_cognito_user_pools {
  floorPlan: String
  images: [String!]
  videos: [String!]
  virtualTour: String
}

type PropertyPricing @aws_api_key @aws_cognito_user_pools {
  currency: String!
  deposit: Float!
  monthlyRent: Float!
  serviceCharge: Float
  utilitiesIncluded: Boolean
}

type PropertySearchResponse @aws_api_key @aws_cognito_user_pools {
  count: Int!
  from: Int!
  nextToken: String
  properties: [Property!]!
  size: Int!
  total: Int!
}

type PropertySpecifications @aws_api_key @aws_cognito_user_pools {
  bathrooms: Int
  bedrooms: Int
  floors: Int
  furnished: Boolean
  parkingSpaces: Int
  squareMeters: Float!
}

type PropertyUpdateEvent @aws_api_key @aws_cognito_user_pools {
  changes: [PropertyChange!]
  eventType: PropertyEventType!
  property: Property
  propertyId: ID!
  timestamp: AWSDateTime!
}

type PropertyUser @aws_api_key @aws_cognito_user_pools {
  firstName: String!
  lastName: String!
}

type PublishResult @aws_api_key @aws_cognito_user_pools {
  message: String
  success: Boolean!
}

type Query {
  dummyQuery: String @aws_api_key @aws_cognito_user_pools
  getApplication(applicationId: ID!): Application @aws_cognito_user_pools
  getApplicationDocumentUploadUrl(applicationId: ID!, fileName: String!, fileType: String!): MediaUploadResponse! @aws_cognito_user_pools
  getApplicationStats(landlordId: ID!): ApplicationStats! @aws_cognito_user_pools
  getCategorizedProperties(limitPerCategory: Int): CategorizedPropertiesResponse! @aws_api_key @aws_cognito_user_pools
  getConversationMessages(conversationId: String!): [ChatMessage!]! @aws_cognito_user_pools
  getDistricts(regionId: ID!): [District!]! @aws_api_key @aws_cognito_user_pools
  getInitialAppState(limitPerCategory: Int): InitialAppState! @aws_api_key @aws_cognito_user_pools
  getMe: UserProfile @aws_api_key @aws_cognito_user_pools
  getMediaLibrary: MediaItem @aws_cognito_user_pools
  getPropertiesByCategory(category: PropertyCategory!, limit: Int, nextToken: String): CategoryPropertyResponse! @aws_api_key @aws_cognito_user_pools
  getPropertiesByLocation(district: String, limit: Int, nextToken: String, region: String!, sortBy: PropertySortOption): PropertyCardsResponse! @aws_api_key @aws_cognito_user_pools
  getProperty(propertyId: ID!): Property @aws_api_key @aws_cognito_user_pools
  getRegions: [Region!]! @aws_api_key @aws_cognito_user_pools
  getStreets(wardId: ID!): [Street!]! @aws_api_key @aws_cognito_user_pools
  getUnreadCount: Int! @aws_cognito_user_pools
  getUserConversations: [Conversation!]! @aws_cognito_user_pools
  getWards(districtId: ID!): [Ward!]! @aws_api_key @aws_cognito_user_pools
  listAgentProperties(limit: Int, nextToken: String): PropertyListResponse! @aws_cognito_user_pools
  listLandlordProperties(limit: Int, nextToken: String): PropertyListResponse! @aws_cognito_user_pools
  listMyApplications(limit: Int, nextToken: String, status: ApplicationStatus): ApplicationListResponse! @aws_cognito_user_pools
  listPropertyApplications(limit: Int, nextToken: String, propertyId: ID!, status: ApplicationStatus): ApplicationListResponse! @aws_cognito_user_pools
}

type Region @aws_api_key @aws_cognito_user_pools {
  id: ID!
  name: String!
}

type Street @aws_api_key @aws_cognito_user_pools {
  id: ID!
  name: String!
  wardId: ID!
}

type Subscription {
  dummySubscription: String @aws_api_key @aws_cognito_user_pools
}

type SubscriptionPublishResponse @aws_api_key @aws_cognito_user_pools {
  message: String
  propertyId: ID
  success: Boolean!
}

type SuccessResponse @aws_api_key @aws_cognito_user_pools {
  message: String!
  success: Boolean!
}

type Tenant @aws_api_key @aws_cognito_user_pools {
  accountStatus: AccountStatus
  createdAt: AWSDateTime
  currency: String
  email: String!
  emailNotifications: Boolean
  firstName: String!
  isEmailVerified: Boolean
  language: String
  lastName: String!
  phoneNumber: String
  profileImage: String
  pushNotifications: Boolean
  smsNotifications: Boolean
  updatedAt: AWSDateTime
  userType: UserType!
}

type TenantBasicInfo @aws_api_key @aws_cognito_user_pools {
  firstName: String!
  lastName: String!
  profileImage: String
}

type UnreadCountUpdate @aws_api_key @aws_cognito_user_pools {
  totalUnread: Int!
}

type Ward @aws_api_key @aws_cognito_user_pools {
  districtId: ID!
  id: ID!
  name: String!
}

type _ApplicationPlaceholder @aws_api_key @aws_cognito_user_pools {
  _temp: String
}

type _ChatPlaceholder @aws_api_key @aws_cognito_user_pools {
  _temp: String
}

type _PropertyPlaceholder @aws_api_key @aws_cognito_user_pools {
  _temp: String
}

enum AccountStatus {
  ACTIVE
  PENDING_LANDLORD_VERIFICATION
  PENDING_VERIFICATION
  SUSPENDED
}

enum ApplicationStatus {
  APPROVED
  EXPIRED
  REJECTED
  SUBMITTED
  UNDER_REVIEW
  WITHDRAWN
}

enum EmploymentStatus {
  CONTRACT
  EMPLOYED_FULL_TIME
  EMPLOYED_PART_TIME
  RETIRED
  SELF_EMPLOYED
  STUDENT
  UNEMPLOYED
}

enum LocationType {
  DISTRICT
  REGION
  STREET
  WARD
}

enum PropertyCategory {
  FAVORITES
  LOWEST_PRICE
  MORE
  MOST_VIEWED
  NEARBY
  RECENTLY_VIEWED
}

enum PropertyEventType {
  AVAILABILITY_CHANGED
  DESCRIPTION_UPDATED
  MEDIA_UPDATED
  PRICE_CHANGED
  PROPERTY_CREATED
  STATUS_CHANGED
}

enum PropertySortOption {
  NEWEST_FIRST
  PRICE_HIGH_LOW
  PRICE_LOW_HIGH
}

enum PropertyStatus {
  AVAILABLE
  DELETED
  DRAFT
  MAINTENANCE
  RENTED
}

enum PropertyType {
  APARTMENT
  COMMERCIAL
  HOUSE
  LAND
  ROOM
  STUDIO
}

enum SmokingStatus {
  NON_SMOKER
  OCCASIONAL
  SMOKER
}

enum UserType {
  ADMIN
  AGENT
  LANDLORD
  TENANT
}

input AddressInput {
  coordinates: CoordinatesInput
  district: String!
  postalCode: String
  region: String!
  street: String
  ward: String
}

input ApplicantDetailsInput {
  emergencyContact: EmergencyContactInput!
  employmentStatus: EmploymentStatus!
  hasPets: Boolean!
  leaseDuration: Int!
  monthlyIncome: Float!
  moveInDate: AWSDateTime!
  numberOfOccupants: Int!
  occupation: String!
  petDetails: String
  smokingStatus: SmokingStatus!
}

input CognitoUserPool {
  userPoolId: String!
}

input CoordinatesInput {
  latitude: Float!
  longitude: Float!
}

input CreateLocationInput {
  name: String!
  parent: String
  type: LocationType!
}

input CreatePropertyInput {
  address: AddressInput!
  amenities: [String!]
  availability: PropertyAvailabilityInput!
  description: String!
  media: PropertyMediaInput
  pricing: PropertyPricingInput!
  propertyType: PropertyType!
  specifications: PropertySpecificationsInput!
  title: String!
}

input EmergencyContactInput {
  email: String
  name: String!
  phoneNumber: String!
  relationship: String!
}

input LandlordApplicationInput {
  address: AddressInput!
  alternatePhone: String
  birthDate: String!
  nationalId: String!
  phoneNumber: String!
}

input PropertyAvailabilityInput {
  available: Boolean!
  availableFrom: AWSDateTime
  maximumLeaseTerm: Int
  minimumLeaseTerm: Int
}

input PropertyChangeInput {
  field: String!
  newValue: String!
  oldValue: String
}

input PropertyMediaInput {
  floorPlan: String
  images: [String!]
  videos: [String!]
  virtualTour: String
}

input PropertyPricingInput {
  currency: String!
  deposit: Float!
  monthlyRent: Float!
  serviceCharge: Float
  utilitiesIncluded: Boolean
}

input PropertySearchInput {
  bedrooms: Int
  district: String
  maxPrice: Float
  minPrice: Float
  propertyType: PropertyType
  region: String
}

input PropertySpecificationsInput {
  bathrooms: Int
  bedrooms: Int
  floors: Int
  furnished: Boolean
  parkingSpaces: Int
  squareMeters: Float!
}

input PropertyUpdateEventInput {
  changes: [PropertyChangeInput!]
  eventType: PropertyEventType!
  propertyId: ID!
  timestamp: AWSDateTime!
}

input SendMessageInput {
  content: String!
  conversationId: String!
}

input SignUpInput {
  email: String!
  firstName: String!
  lastName: String!
  password: String!
  phoneNumber: String!
}

input SubmitApplicationInput {
  applicantDetails: ApplicantDetailsInput!
  propertyId: ID!
}

input UpdateApplicationInput {
  applicantDetails: ApplicantDetailsInput
}

input UpdateApplicationStatusInput {
  landlordNotes: String
  rejectionReason: String
  status: ApplicationStatus!
}

input UpdatePropertyInput {
  address: AddressInput
  amenities: [String!]
  availability: PropertyAvailabilityInput
  description: String
  media: PropertyMediaInput
  pricing: PropertyPricingInput
  propertyType: PropertyType
  specifications: PropertySpecificationsInput
  status: PropertyStatus
  title: String
}

input UpdateUserInput {
  firstName: String
  lastName: String
  phoneNumber: String
  preferences: AWSJSON
  profileImage: String
}
