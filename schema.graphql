enum AccountStatus {
	PENDING_VERIFICATION
	ACTIVE
	SUSPENDED
	PENDING_LANDLORD_VERIFICATION
}

type Address {
	street: String!
	ward: String!
	district: String!
	region: String!
	postalCode: String
	coordinates: Coordinates
}

input AddressInput {
	street: String!
	ward: String!
	district: String!
	region: String!
	postalCode: String
	coordinates: CoordinatesInput
}

type Admin {
	userId: ID!
	email: String!
	phoneNumber: String
	firstName: String!
	lastName: String!
	userType: UserType!
	accountStatus: AccountStatus
	isEmailVerified: Boolean
	profileImage: String
	language: String
	currency: String
	emailNotifications: Boolean
	smsNotifications: Boolean
	pushNotifications: Boolean
	permissions: [String!]
	createdAt: AWSDateTime
	updatedAt: AWSDateTime
}

type AppInitialState {
	user: UserBasic
	properties: PropertyCardsResponse!
	totalProperties: Int!
	personalizedSections: PersonalizedSections
}

type ApplicantDetails {
	monthlyIncome: Float!
	occupation: String!
	employmentStatus: EmploymentStatus!
	moveInDate: AWSDateTime!
	leaseDuration: Int!
	numberOfOccupants: Int!
	hasPets: Boolean!
	petDetails: String
	smokingStatus: SmokingStatus!
	emergencyContact: EmergencyContact!
}

input ApplicantDetailsInput {
	monthlyIncome: Float!
	occupation: String!
	employmentStatus: EmploymentStatus!
	moveInDate: AWSDateTime!
	leaseDuration: Int!
	numberOfOccupants: Int!
	hasPets: Boolean!
	petDetails: String
	smokingStatus: SmokingStatus!
	emergencyContact: EmergencyContactInput!
}

type Application {
	applicationId: ID!
	propertyId: ID!
	property: Property
	applicantUserId: ID!
	applicant: Tenant
	landlordId: ID!
	landlord: Landlord
	status: ApplicationStatus!
	submittedAt: AWSDateTime!
	reviewedAt: AWSDateTime
	reviewedBy: ID
	applicantDetails: ApplicantDetails!
	employment: EmploymentDetails
	references: [Reference!]
	documents: ApplicationDocuments
	landlordNotes: String
	rejectionReason: String
	createdAt: AWSDateTime!
	updatedAt: AWSDateTime!
}

type ApplicationDocuments {
	identificationDocument: String
	proofOfIncome: [String!]
	employmentLetter: String
	bankStatements: [String!]
	previousLandlordReference: String
	additionalDocuments: [String!]
}

input ApplicationDocumentsInput {
	identificationDocument: String
	proofOfIncome: [String!]
	employmentLetter: String
	bankStatements: [String!]
	previousLandlordReference: String
	additionalDocuments: [String!]
}

type ApplicationListResponse {
	applications: [Application!]!
	nextToken: String
	count: Int!
}

type ApplicationResponse {
	success: Boolean!
	message: String!
	applicationId: ID
	status: String
	submittedAt: String
}

type ApplicationStats {
	total: Int!
	submitted: Int!
	underReview: Int!
	approved: Int!
	rejected: Int!
	withdrawn: Int!
}

enum ApplicationStatus {
	SUBMITTED
	UNDER_REVIEW
	APPROVED
	REJECTED
	WITHDRAWN
	EXPIRED
}

type AuthResponse {
	accessToken: String!
	refreshToken: String!
	user: UserProfile!
}

input BecomeLandlordInput {
	businessName: String!
	businessLicense: String!
	taxId: String!
	verificationDocuments: [String!]
}

type ChatMessage {
	id: ID!
	conversationId: String!
	senderId: String!
	content: String!
	timestamp: String!
	isRead: Boolean!
}

input CognitoUserPool {
	userPoolId: String!
}

type Conversation {
	id: String!
	tenantId: String!
	landlordId: String!
	propertyId: String!
	propertyTitle: String!
	lastMessage: String!
	lastMessageSender: String!
	lastMessageTime: String!
	unreadCount: AWSJSON!
	createdAt: String!
	updatedAt: String!
}

type Coordinates {
	latitude: Float!
	longitude: Float!
}

input CoordinatesInput {
	latitude: Float!
	longitude: Float!
}

input CreateConversationInput {
	tenantId: String!
	landlordId: String!
	propertyId: String!
	propertyTitle: String!
	initialMessage: String
}

input CreateLocationInput {
	type: LocationType!
	name: String!
	parent: String
}

input CreatePropertyInput {
	title: String!
	description: String!
	address: AddressInput!
	propertyType: PropertyType!
	specifications: PropertySpecificationsInput!
	pricing: PropertyPricingInput!
	amenities: [String!]
	media: PropertyMediaInput
	availability: PropertyAvailabilityInput!
}

type District {
	id: ID!
	name: String!
	regionId: ID!
}

type EmergencyContact {
	name: String!
	relationship: String!
	phoneNumber: String!
	email: String
}

input EmergencyContactInput {
	name: String!
	relationship: String!
	phoneNumber: String!
	email: String
}

type EmploymentDetails {
	employerName: String!
	employerPhone: String!
	employerAddress: String!
	jobTitle: String!
	employmentStartDate: AWSDateTime!
	monthlyIncome: Float!
}

input EmploymentDetailsInput {
	employerName: String!
	employerPhone: String!
	employerAddress: String!
	jobTitle: String!
	employmentStartDate: AWSDateTime!
	monthlyIncome: Float!
}

enum EmploymentStatus {
	EMPLOYED_FULL_TIME
	EMPLOYED_PART_TIME
	SELF_EMPLOYED
	CONTRACT
	UNEMPLOYED
	STUDENT
	RETIRED
}

type Landlord {
	userId: ID!
	email: String!
	phoneNumber: String
	firstName: String!
	lastName: String!
	userType: UserType!
	accountStatus: AccountStatus
	isEmailVerified: Boolean
	profileImage: String
	language: String
	currency: String
	emailNotifications: Boolean
	smsNotifications: Boolean
	pushNotifications: Boolean
	businessName: String
	businessLicense: String
	taxId: String
	verificationDocuments: [String!]
	createdAt: AWSDateTime
	updatedAt: AWSDateTime
}

input LandlordApplicationInput {
	userId: ID!
	nationalId: String!
	birthDate: String!
	phoneNumber: String!
	alternatePhone: String
	address: AddressInput!
}

type LocationCreateResponse {
	success: Boolean!
	location: LocationResult!
	message: String!
}

type LocationImportResponse {
	success: Boolean!
	imported: Int!
	skipped: Int!
	errors: [String!]
	message: String!
}

type LocationJsonResponse {
	success: Boolean!
	cloudfrontUrl: String!
	message: String!
}

union LocationResult = Region | District | Ward | Street 

enum LocationType {
	REGION
	DISTRICT
	WARD
	STREET
}

type LocationUpdateResponse {
	success: Boolean!
	message: String
	location: Region
}

type MediaFile {
	contentType: String!
	fileUrl: String!
	fileName: String
}

type MediaItem {
	userId: String!
	actionTime: Float!
	media: PropertyMedia
	additionalFiles: [MediaFile]
}

type MediaUploadResponse {
	uploadUrl: String!
	key: String!
	fileUrl: String!
}

type PersonalizedSections {
	favorites: [PropertyCard!]
	recentlyViewed: [PropertyCard!]
	recommended: [PropertyCard!]
}

type Property {
	propertyId: ID!
	landlordId: ID!
	managerId: ID
	title: String!
	description: String!
	address: Address!
	propertyType: PropertyType!
	specifications: PropertySpecifications!
	pricing: PropertyPricing!
	amenities: [String!]
	media: PropertyMedia
	availability: PropertyAvailability!
	status: PropertyStatus!
	version: Int
	createdAt: AWSDateTime!
	updatedAt: AWSDateTime!
}

type PropertyAvailability {
	available: Boolean!
	availableFrom: AWSDateTime
	minimumLeaseTerm: Int
	maximumLeaseTerm: Int
}

input PropertyAvailabilityInput {
	available: Boolean!
	availableFrom: AWSDateTime
	minimumLeaseTerm: Int
	maximumLeaseTerm: Int
}

type PropertyCard {
	propertyId: ID!
	title: String!
	monthlyRent: Float!
	currency: String!
	propertyType: PropertyType!
	bedrooms: Int
	district: String!
	region: String!
	thumbnail: String
	available: Boolean!
}

type PropertyCardsResponse {
	properties: [PropertyCard!]!
	nextToken: String
	count: Int!
}

type PropertyChange {
	field: String!
	oldValue: String
	newValue: String!
}

input PropertyChangeInput {
	field: String!
	oldValue: String
	newValue: String!
}

enum PropertyEventType {
	PRICE_CHANGED
	STATUS_CHANGED
	AVAILABILITY_CHANGED
	MEDIA_UPDATED
	DESCRIPTION_UPDATED
	PROPERTY_CREATED
}

type PropertyImportResult {
	success: Boolean!
	imported: Int!
	updated: Int!
	skipped: Int!
	errors: [String!]!
	message: String!
}

type PropertyListResponse {
	properties: [Property!]!
	nextToken: String
	count: Int!
}

type PropertyMedia {
	images: [String!]
	videos: [String!]
	virtualTour: String
	floorPlan: String
}

input PropertyMediaInput {
	images: [String!]
	videos: [String!]
	virtualTour: String
	floorPlan: String
}

type PropertyPricing {
	monthlyRent: Float!
	deposit: Float!
	currency: String!
	utilitiesIncluded: Boolean
	serviceCharge: Float
}

input PropertyPricingInput {
	monthlyRent: Float!
	deposit: Float!
	currency: String!
	utilitiesIncluded: Boolean
	serviceCharge: Float
}

input PropertySearchInput {
	region: String
	district: String
	minPrice: Float
	maxPrice: Float
	propertyType: PropertyType
	bedrooms: Int
}

type PropertySearchResponse {
	properties: [Property!]!
	count: Int!
	total: Int!
	from: Int!
	size: Int!
	nextToken: String
}

type PropertySpecifications {
	squareMeters: Float!
	bedrooms: Int
	bathrooms: Int
	floors: Int
	parkingSpaces: Int
	furnished: Boolean
}

input PropertySpecificationsInput {
	squareMeters: Float!
	bedrooms: Int
	bathrooms: Int
	floors: Int
	parkingSpaces: Int
	furnished: Boolean
}

enum PropertyStatus {
	DRAFT
	AVAILABLE
	RENTED
	MAINTENANCE
	DELETED
}

enum PropertyType {
	APARTMENT
	HOUSE
	STUDIO
	ROOM
	COMMERCIAL
	LAND
}

type PropertyUpdateEvent {
	propertyId: ID!
	eventType: PropertyEventType!
	property: Property
	changes: [PropertyChange!]
	timestamp: AWSDateTime!
}

input PropertyUpdateEventInput {
	propertyId: ID!
	eventType: PropertyEventType!
	changes: [PropertyChangeInput!]
	timestamp: AWSDateTime!
}

type PublishResult {
	success: Boolean!
	message: String
}

type Reference {
	name: String!
	relationship: String!
	phoneNumber: String!
	email: String
}

input ReferenceInput {
	name: String!
	relationship: String!
	phoneNumber: String!
	email: String
}

type Region {
	id: ID!
	name: String!
}

input ReviewApplicationInput {
	status: ApplicationStatus!
	landlordNotes: String
	rejectionReason: String
}

input SendMessageInput {
	conversationId: String!
	senderId: String!
	content: String!
}

input SignUpInput {
	email: String!
	password: String!
	phoneNumber: String!
	firstName: String!
	lastName: String!
}

enum SmokingStatus {
	NON_SMOKER
	SMOKER
	OCCASIONAL
}

type Street {
	id: ID!
	name: String!
	wardId: ID!
}

input SubmitApplicationInput {
	propertyId: ID!
	applicantDetails: ApplicantDetailsInput!
	employment: EmploymentDetailsInput
	references: [ReferenceInput!]
	documents: ApplicationDocumentsInput
}

type SubscriptionPublishResponse {
	success: Boolean!
	message: String
	propertyId: ID
}

type SuccessResponse {
	success: Boolean!
	message: String!
}

type Tenant {
	userId: ID!
	email: String!
	phoneNumber: String
	firstName: String!
	lastName: String!
	userType: UserType!
	accountStatus: AccountStatus
	isEmailVerified: Boolean
	profileImage: String
	language: String
	currency: String
	emailNotifications: Boolean
	smsNotifications: Boolean
	pushNotifications: Boolean
	createdAt: AWSDateTime
	updatedAt: AWSDateTime
}

type UnreadCountUpdate {
	totalUnread: Int!
}

input UpdateApplicationInput {
	applicantDetails: ApplicantDetailsInput
	employment: EmploymentDetailsInput
	references: [ReferenceInput!]
	documents: ApplicationDocumentsInput
}

input UpdatePropertyInput {
	title: String
	description: String
	address: AddressInput
	propertyType: PropertyType
	specifications: PropertySpecificationsInput
	pricing: PropertyPricingInput
	amenities: [String!]
	media: PropertyMediaInput
	availability: PropertyAvailabilityInput
	status: PropertyStatus
}

input UpdateUserInput {
	firstName: String
	lastName: String
	phoneNumber: String
	profileImage: String
	preferences: AWSJSON
}

type UserBasic {
	userId: ID!
	firstName: String!
	lastName: String!
	email: String!
	userType: UserType!
	profileImage: String
	language: String!
	currency: String!
}

union UserProfile = Tenant | Landlord | Admin 

enum UserType {
	TENANT
	LANDLORD
	ADMIN
}

type Ward {
	id: ID!
	name: String!
	districtId: ID!
}

type Mutation {
	submitApplication(input: SubmitApplicationInput!): Application!
	updateApplication(applicationId: ID!, input: UpdateApplicationInput!): Application!
	withdrawApplication(applicationId: ID!): Application!
	reviewApplication(applicationId: ID!, input: ReviewApplicationInput!): Application!
	approveApplication(applicationId: ID!, landlordNotes: String): Application!
	rejectApplication(applicationId: ID!, rejectionReason: String!, landlordNotes: String): Application!
	reviewLandlordApplication(applicationId: ID!, input: ReviewApplicationInput!): SuccessResponse!
	createConversation(input: CreateConversationInput!): Conversation!
	sendMessage(input: SendMessageInput!): ChatMessage!
	markAsRead(conversationId: String!, userId: String!): Conversation!
	publishNewMessage(input: AWSJSON!): PublishResult
	publishConversationUpdate(input: AWSJSON!): PublishResult
	publishUnreadCountUpdate(input: AWSJSON!): PublishResult
	createLocation(input: CreateLocationInput!): LocationCreateResponse!
	updateLocation(locationId: ID!, name: String!): LocationUpdateResponse!
	importLocationsFromCSV(csvData: String!): LocationImportResponse!
	regenerateLocationJson: LocationJsonResponse!
	getMediaUploadUrl(userId: ID!, fileName: String!, contentType: String!): MediaUploadResponse!
	deleteMediaItem(userId: ID!, fileUrl: String!): MediaItem
	associateMediaWithProperty(propertyId: ID!, landlordId: ID!, media: PropertyMediaInput!): Property!
	createProperty(landlordId: ID!, input: CreatePropertyInput!): Property!
	updateProperty(propertyId: ID!, landlordId: ID!, input: UpdatePropertyInput!): Property!
	deleteProperty(propertyId: ID!, landlordId: ID!): SuccessResponse!
	updatePropertyStatus(propertyId: ID!, landlordId: ID!, status: PropertyStatus!): Property!
	markPropertyAsRented(propertyId: ID!, landlordId: ID!, tenantId: ID!): Property!
	markPropertyAsAvailable(propertyId: ID!, landlordId: ID!): Property!
	assignPropertyManager(propertyId: ID!, landlordId: ID!, managerId: ID!): SuccessResponse!
	removePropertyManager(propertyId: ID!, landlordId: ID!): SuccessResponse!
	importPropertiesFromCSV(csvData: String!): PropertyImportResult!
	publishNewPropertyEvent(propertyId: ID!, region: String!): SubscriptionPublishResponse
	publishPropertyUpdateEvent(input: PropertyUpdateEventInput!): PropertyUpdateEvent
	signUp(input: SignUpInput!): AuthResponse!
	signIn(email: String!, password: String!): AuthResponse!
	forgotPassword(email: String!): SuccessResponse!
	resetPassword(email: String!, confirmationCode: String!, newPassword: String!): SuccessResponse!
	verifyEmail(email: String!, code: String!): SuccessResponse!
	resendVerificationCode(email: String!): SuccessResponse!
	updateUser(userId: ID!, input: UpdateUserInput!): UserProfile!
	becomeLandlord(userId: ID!, input: BecomeLandlordInput!): ApplicationResponse!
	submitLandlordApplication(input: LandlordApplicationInput!): ApplicationResponse!
}

type Query {
	getAppInitialState(limit: Int): AppInitialState!
	getPropertyCards(limit: Int, nextToken: String): PropertyCardsResponse!
	getApplication(applicationId: ID!): Application
	listMyApplications(status: ApplicationStatus, limit: Int, nextToken: String): ApplicationListResponse!
	listPropertyApplications(
		propertyId: ID!,
		status: ApplicationStatus,
		limit: Int,
		nextToken: String
	): ApplicationListResponse!
	listLandlordApplications(
		landlordId: ID!,
		status: ApplicationStatus,
		limit: Int,
		nextToken: String
	): ApplicationListResponse!
	getApplicationStats(landlordId: ID!): ApplicationStats!
	getApplicationDocumentUploadUrl(applicationId: ID!, fileName: String!, fileType: String!): MediaUploadResponse!
	getUserConversations(userId: String!): [Conversation!]!
	getConversationMessages(conversationId: String!): [ChatMessage!]!
	getUnreadCount(userId: String!): Int!
	getRegions: [Region!]!
	getDistricts(regionId: ID!): [District!]!
	getWards(districtId: ID!): [Ward!]!
	getStreets(wardId: ID!): [Street!]!
	getMediaLibrary(userId: ID!): MediaItem
	getProperty(propertyId: ID!): Property
	listProperties(limit: Int, nextToken: String): PropertyListResponse!
	searchProperties(
		region: String,
		district: String,
		minPrice: Float,
		maxPrice: Float,
		propertyType: PropertyType,
		bedrooms: Int,
		limit: Int,
		from: Int,
		q: String
	): PropertySearchResponse!
	getPropertiesByLocation(region: String!, district: String): [Property!]!
	getNearbyProperties(lat: Float!, lng: Float!, radiusKm: Float): [Property!]!
	listLandlordProperties(landlordId: ID!, limit: Int, nextToken: String): PropertyListResponse!
	listManagedProperties(managerId: ID!, limit: Int, nextToken: String): PropertyListResponse!
	getUser(userId: ID!): UserProfile
}

type Subscription {
	onApplicationStatusChanged(applicationId: ID!): Application
	onNewApplicationForLandlord(landlordId: ID!): Application
	onNewMessage(conversationId: String!): ChatMessage
	onConversationUpdated(userId: String!): Conversation
	onUnreadCountChanged(userId: String!): UnreadCountUpdate
	onPropertiesUpdated(propertyIds: [ID!]!): PropertyUpdateEvent
	onNewPropertyMatchesSearch(searchCriteria: PropertySearchInput!): Property
	onPropertyUpdated(propertyId: ID!): PropertyUpdateEvent
	onNewPropertyInRegion(region: String!): Property
}