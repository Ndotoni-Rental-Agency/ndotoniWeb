@tailwind base;
@tailwind components;
@tailwind utilities;

/* ===================== */
/* ===== FONT SETUP ===== */
/* ===================== */

@layer base {
  /* Ensure smooth font rendering */
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
  
  /* Default font settings */
  body {
    font-feature-settings: 'rlig' 1, 'calt' 1;
  }
}

/* ===================== */
/* ===== UTILITIES ===== */
/* ===================== */

@layer utilities {
  @keyframes bounce-gentle {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-5px); }
  }

  @keyframes fade-in {
    from { opacity: 0; transform: translateY(5px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes pull-refresh-spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .animate-bounce-gentle {
    animation: bounce-gentle 2s ease-in-out infinite;
  }

  .animate-fade-in {
    animation: fade-in 0.3s ease-out;
  }

  .animate-pull-refresh-spin {
    animation: pull-refresh-spin 1s linear infinite;
  }

  .pull-to-refresh-container,
  .pull-to-refresh-indicator {
    transition: transform 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  }
}

/* ================= */
/* ===== BASE ===== */
/* ================= */

@layer base {
  :root {
    --color-primary-50: 254 242 242;
    --color-primary-100: 254 226 226;
    --color-primary-200: 254 202 202;
    --color-primary-300: 252 165 165;
    --color-primary-400: 248 113 113;
    --color-primary-500: 239 68 68;
    --color-primary-600: 220 38 38;
    --color-primary-700: 185 28 28;
    --color-primary-800: 153 27 27;
    --color-primary-900: 127 29 29;
  }

  html {
    scroll-behavior: smooth;
    overflow-x: hidden;
    overflow-y: auto;
    overscroll-behavior-x: none; /* ✅ FIX: do NOT block vertical scrolling */
    -webkit-text-size-adjust: 100%;
  }

  body {
    @apply bg-gray-50 text-gray-900 font-sans;
    overflow-x: hidden;
    overflow-y: auto;
    overscroll-behavior-x: none; /* ✅ FIX */
    -webkit-overflow-scrolling: touch;
    position: relative;
    min-height: 100vh;
  }

  * {
    @apply border-gray-200;
    box-sizing: border-box;
  }

  input, textarea, select {
    font-size: 16px !important;
    appearance: none;
  }

  /* ✅ FIX: h-screen should not hard-lock height */
  .h-screen {
    min-height: 100vh;
    min-height: 100dvh;
  }
}

/* ======================= */
/* ===== COMPONENTS ===== */
/* ======================= */

@layer components {
  .container {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  .btn {
    @apply inline-flex items-center justify-center px-4 py-2 rounded-lg transition-colors;
  }

  .btn-primary {
    @apply bg-red-500 text-white hover:bg-red-600;
  }

  .card {
    @apply bg-white rounded-xl shadow-sm border border-gray-200 p-6;
  }
}

/* ====================== */
/* ===== UTILITIES ===== */
/* ====================== */

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }

  .scrollbar-hide {
    -ms-overflow-style: none;
    scrollbar-width: none;
  }

  .scrollbar-hide::-webkit-scrollbar {
    display: none;
  }

  .property-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem 1rem;
  }

  @media (min-width: 640px) {
    .property-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 2.5rem 1.25rem;
    }
  }

  @media (min-width: 768px) {
    .property-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  @media (min-width: 1024px) {
    .property-grid {
      grid-template-columns: repeat(4, 1fr);
    }
  }

  @media (min-width: 1280px) {
    .property-grid {
      grid-template-columns: repeat(5, 1fr);
    }
  }

  .property-card-container {
    height: 100%;
    backface-visibility: hidden;
  }

  .property-grid > * {
    height: 100%;
  }
}

/* ===================== */
/* ===== MOBILE ===== */
/* ===================== */

@media (max-width: 768px) {
  html {
    overflow-x: hidden;
    overflow-y: auto;
    overscroll-behavior-x: none;
  }

  body {
    overflow-x: hidden;
    overflow-y: auto;
    min-height: 100vh;
    min-height: 100dvh;
  }

  .overflow-y-auto {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain;
  }

  *,
  *::before,
  *::after {
    animation: none !important;
    transition: none !important;
  }

  .opacity-0 {
    opacity: 1 !important;
  }
}

/* Hide scrollbars */
.hide-scrollbar::-webkit-scrollbar {
  display: none;
}
.hide-scrollbar {
  -ms-overflow-style: none; /* IE and Edge */
  scrollbar-width: none; /* Firefox */
}


/* ===================== */
/* ===== MODALS ===== */
/* ===================== */

@layer utilities {
  .modal-overlay {
    position: fixed !important;
    inset: 0 !important;
    z-index: 9999 !important;
  }

  /* ⚠️ Only apply while modal is open */
  .modal-open {
    overflow: hidden !important;
    width: 100% !important;
  }

  @media (max-width: 768px) {
    .modal-container {
      min-height: 100vh;
      min-height: 100dvh;
    }

    .modal-content {
      max-height: calc(100dvh - 2rem);
      overflow-y: auto;
    }
  }
}
